<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>שאל את המערכת AI </title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/ai.css') }}">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>שאל את המערכת AI </h1>
            <p>שאל שאלות על נתוני הייצור, הלקוחות והסטטיסטיקות</p>
        </div>
        
        <div class="content">
            <a href="/main-dashboard" class="back-link">← חזור לדשבורד הראשי</a>
            
            <form method="POST" id="aiForm">
                <div class="form-container">
                    <div class="form-group">
                        <label for="question">שאלה:</label>
                        <textarea 
                            name="question" 
                            id="question" 
                            class="question-input"
                            placeholder="לדוגמה: כמה הזמנות יעדיפות גבוהה יש לנו השבוע? מי הלקוח הכי פעיל? מה הסטטיסטיקות של המערכת?"
                            required
                        >{{ request.form.get('question', '') }}</textarea>
                    </div>
                    
                    <button type="submit" class="submit-btn" id="submitBtn">
                        <span>🚀</span>
                        <span>שלח שאלה</span>
                    </button>
                </div>
                
                <div class="suggestions">
                    <h3>דוגמאות לשאלות:</h3>
                    <div class="suggestion-buttons">
                        <button type="button" class="suggestion-btn" onclick="setQuestion('מהן הסטטיסטיקות של המערכת?')">
                           סטטיסטיקה של תוכניות פעילות
                        </button>
                        <button type="button" class="suggestion-btn" onclick="setQuestion('תמנה לי לפי חלוקה של עדיפות גבוהה, בינונית, נמוכה')">
                          סדר עדיפויות
                        </button>
                        <button type="button" class="suggestion-btn" onclick="setQuestion('מי הם הלקוחות המובילים? ')">
                            לקוחות מובילים
                        </button>
                        <button type="button" class="suggestion-btn" onclick="setQuestion(' מהם התוכניות הפעילות כעת?')">
                            תוכניות פעילות
                        </button>
                    </div>
                </div>
            </form>
            
            <div class="loading-spinner" id="loadingSpinner">
                <div class="spinner"></div>
                <p>מעבד את השאלה שלך...</p>
            </div>
            
            {% if error %}
                <div class="error-section">
                    <span style="font-size: 1.5rem;">❌</span>
                    <div>
                        <strong>שגיאה:</strong> {{ error }}
                    </div>
                </div>
            {% endif %}
            
            {% if answer %}
                <div class="answer-section">
                    <div class="answer-header">
                        <span style="font-size: 1.5rem;">🤖</span>
                        <h3>תשובת המערכת AI :</h3>
                    </div>
                    <div class="answer-content">{{ answer }}</div>
                </div>
            {% endif %}
        </div>
    </div>
    
    <script>
        function setQuestion(text) {
            document.getElementById('question').value = text;
        }
        
        document.getElementById('aiForm').addEventListener('submit', function() {
            const btn = document.getElementById('submitBtn');
            const spinner = document.getElementById('loadingSpinner');
            
            btn.disabled = true;
            btn.innerHTML = '<span>⏳</span><span>מעבד...</span>';
            spinner.style.display = 'block';
        });
        
        // התמקדות אוטומטית בשדה השאלה
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('question').focus();
        });
    </script>
</body>
</html>